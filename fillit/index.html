<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">
  <title>Fill It!</title>

  <style media="screen">
    html,
    body {
      width: 100%;
      height: 100%;
    }

    body {
      margin: 0;
      display: flex;
      align-items: center;
    }

    #board {
      margin: auto;
      border-spacing: 4px;
    }

    #board td {
      height: 40px;
      width: 40px;
    }

    #board td.p {
      box-sizing: border-box;
      -moz-box-sizing: border-box;
      -webkit-box-sizing: border-box;
      border: solid 5px orange;
    }

    #board td._1 {
      background-color: #00E;
    }
  </style>

</head>

<body>
  <table id='board'>
  </table>
  <script type="text/javascript">
    const board_elem = document.getElementById('board')
    const player_elem = document.getElementById('player')

    var levels
    var stage
    var level = 0

    class Stage {
      constructor(name, board) {
        this.name = name
        this.board = board
      }
    }

    class Board {
      constructor(map, x, y) {
        this.map = map
        this.x = x
        this.y = y
      }

      draw() {
        for (var y = 0; y < this.map.length; y++) {
          var row = board.insertRow(y)
          for (var x = 0; x < this.map[y].length; x++) {
            var cell = row.insertCell(x)
            cell.classList.add('_' + this.map[y][x])
            if (x == this.x && y == this.y) {
              cell.classList.add('p')
            }
          }
        }
      }

      move(dir) {
        var x = (dir % 2) ? dir - 2 : 0
        var y = !(dir % 2) ? dir - 1 : 0

        console.log(x, y)
      }
    }

    function init() {

      stages = [
        new Stage(
          'INTRO',
          new Board([
            [0, 1, 1, 1]
          ], 0, 0),
        )
      ]

      var stage = stages[level]
      stage.board.draw()

      window.addEventListener('keydown', function(e) {
        stage.board.move(e.keyCode % 4)
      })
    }

    window.addEventListener('load', init)
  </script>
</body>

</html>