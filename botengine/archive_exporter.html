<html>

<head>
  <title>Botengine Archive Exporter</title>

</head>

<body>
  <label for='token'>DEVELOPER_ACCESS_TOKEN</label>
  <input type='text' id='token' name='token'></input>
  <button onclick='main()'>Export to CSV</button>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous" /></script>

  <script type='text/javascript'>
    function main() {
      var token = $('#token').val();

      if (!token) {
        return alert('The DEVELOPER_ACCESS_TOKEN field must be populated');
      }

      console.log('got token: ' + token);

      getArchiveList(token);
    }

    function getArchiveList(token) {

      console.log('getting archives...');

      $.get("https://api.botengine.ai/archives", {
          authorization: 'Bearer ' + token
        })
        .done(function(data) {
          console.log(data);
        })
        .fail(function() {
          alert("error");
        });
    }
  </script>
</body>

</html>
